-- MySQL Script generated by MySQL Workbench
-- Wed 17 Jan 2018 12:32:02 PM EET
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema dbreport
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `dbreport` ;

-- -----------------------------------------------------
-- Schema dbreport
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `dbreport` DEFAULT CHARACTER SET utf8 ;
USE `dbreport` ;

-- -----------------------------------------------------
-- Table `dbreport`.`project`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `dbreport`.`project` ;

CREATE TABLE IF NOT EXISTS `dbreport`.`project` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) NULL COMMENT 'The name of the project. eg. \"AIBench\"',
  `project_id` VARCHAR(500) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `dbreport`.`scenario`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `dbreport`.`scenario` ;

CREATE TABLE IF NOT EXISTS `dbreport`.`scenario` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `runid` VARCHAR(500) NULL,
  `project_id` VARCHAR(500) NULL COMMENT 'points to the REVISION table, ID field',
  `version` VARCHAR(500) NULL,
  `commitid` VARCHAR(500) NULL,
  `running_configuration` LONGTEXT NULL,
  `scenario_name` VARCHAR(500) NULL COMMENT 'facenet, distributed-facenet, etc',
  `logs_location` VARCHAR(500) NULL COMMENT 'The location of the shared point where all the logs are stored',
  `start_time` DATETIME NULL COMMENT 'Start time for a scenario',
  `end_time` DATETIME NULL COMMENT 'End time for a scenario',
  PRIMARY KEY (`id`))
ENGINE = InnoDB;

CREATE INDEX `runid_idx` ON `dbreport`.`scenario` (`runid` ASC);


-- -----------------------------------------------------
-- Table `dbreport`.`flow`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `dbreport`.`flow` ;

CREATE TABLE IF NOT EXISTS `dbreport`.`flow` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `runid` VARCHAR(500) NULL,
  `flow_name` VARCHAR(500) NULL COMMENT 'fr-batch-flow, etc',
  `running_node` VARCHAR(500) NULL COMMENT 'The node from the cluster where the flow was deployed',
  `docker_image_link` VARCHAR(500) NULL COMMENT 'The link to the Docker registry from where the flow was deployed',
  `ml_framework` VARCHAR(500) NULL,
  `ml_framework_version` VARCHAR(500) NULL,
  `ml_framework_compiler` VARCHAR(500) NULL,
  `model` VARCHAR(500) NULL,
  `dataset` VARCHAR(500) NULL,
  `cpu` VARCHAR(500) NULL,
  `start_time` DATETIME NULL COMMENT 'Start time for a flow',
  `end_time` DATETIME NULL COMMENT 'End time for a flow',
  PRIMARY KEY (`id`))
ENGINE = InnoDB;

CREATE INDEX `runid_idx` ON `dbreport`.`flow` (`runid` ASC);


-- -----------------------------------------------------
-- Table `dbreport`.`user`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `dbreport`.`user` ;

CREATE TABLE IF NOT EXISTS `dbreport`.`user` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `username` VARCHAR(16) NOT NULL,
  `email` VARCHAR(255) NULL,
  `password` VARCHAR(255) NOT NULL,
  `stylesheet` VARCHAR(255) NULL,
  PRIMARY KEY (`id`));


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
